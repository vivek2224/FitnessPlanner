<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Account</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
</head>
<body style =  "position: relative; min-height: 100vh; background: linear-gradient(to right, #A3D8F6, #E3F5F6);">
    <!--user nav bar at the top of the page-->
    <nav class="navbar navbar-inverse" style = "margin-bottom:0px;">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/userHomepage" style = "font-size: 20px" >OneFit</a>
        </div>
        <div style = "font-size: 17px; float: right">
          <ul class="nav navbar-nav">
            <li><a href="/health">Health</a></li>
            <li><a href="/exercise">Exercise</a></li>
            <li><a href="/nutrition">Nutrition</a></li>
            <li><a href="/goals">Goals</a></li>
            <li><a href="/userAccount">Account</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>
        <div class="container">
      <div style = "padding-left: 10%; padding-right: 10%; padding-top: 15px">
        <!--Form to update/set account information (email, password, nutritionist)-->
        <h3> <b>Update/Set Account Information</b></h3>
          <form class="form-inline" action="/userAccount" method="POST" style = "padding-top: 5px">
           <div class="form-group mb-2">
             <select class="form-control"; name="infocategory";>
                <option value="10">Select a Category</option>
                <option value="1">Email</option>
                <option value="2">Password</option>
                 <option value="3">Nutritionist Email</option>
             </select>
           </div>
           <div class="form-group mx-sm-3 mb-2">
             <input type="text" class="form-control" name="updatedInfo" placeholder="Enter email/password" />
           </div>
           <button type="submit" class="btn btn-primary mb-2" name="updateInfo">Save</button>
           <p id = "message" style = "font-size: 15px; color: red"> {{message}} </p>
          </form></br>
        <!--Table for showing account information with option to remove nutritionist items-->
        <h3><b>Account Information</b></h3>
          <table style="width:60%">
           <tr>
            <td><b>Name</b></td>
            <td colspan="2">{{user.name}}</td>
           </tr>
           <tr>
            <td><b>Email:</b></td>
            <td colspan="2">{{user.email}}</td>
           </tr>
           <tr>
            <td><b>Nutritionist:</b></td>
            <td>{{usernutritionist.name}}</td>
            <td>{{usernutritionist.email}}</td>
            <td>
                <form action="/userAccount" method="POST" style = "padding-top: 5px">
                   <input type="hidden" name="category" value="1">
                   <button type="submit" class="btn btn-primary btn-sm" name="removeNutritionist">Remove</button>
                </form>
            </td>
           </tr>
           <tr>
            <td><b>Nutritionist Feedback:</b></td>
            <td colspan="2">{{user.feedback}}</td>
            <td>
                <form action="/userAccount" method="POST" style = "padding-top: 5px">
                   <input type="hidden" name="category" value="2">
                   <button type="submit" class="btn btn-primary btn-sm" name="removeNutritionist">Remove</button>
                </form>
            </td>
           </tr>
          </table></br>
        <!--Table for showing available registered onefit nutritionists-->
        <h3><b>Available Nutritionists</b></h3>
          <table style="width:45%">
           {% for nutritionist in nutritionists %}
           <tr>
            <td><b>{{nutritionist.name}}</b></td>
            <td >{{nutritionist.email}}</td>
           </tr>
           {% endfor %}
          </table></br>
      </div>
    </div>
    <script>
      // Prevent form resubmission
      if (history.replaceState) {
        history.replaceState(null, null, location.href);
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
  <footer style = "background-color : #101010; height: 40px; position : fixed; bottom: 0; width: 100%">
    <p style = "text-align: center; font-size: 20px; color: gray;">OneFit</p>
  </footer>
</body>
</html>